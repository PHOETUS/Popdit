@model List<PopditWeb.Models.Filter>
@{
    ViewBag.Title = "Index";
    Layout = "~/Views/Shared/_Layout.cshtml";
}

<script type="text/javascript">
    function OpenDiv(id)
    {
        // Show all the headers.
        var toHide = document.getElementsByClassName('header');
        for (var i = 0; i < toHide.length; i++) { toHide[i].style.display = "table-row"; }
        // Hide this header
        document.getElementById("header" + id).style.display = "none";
        // Hide all the details.
        var toHide = document.getElementsByClassName('detail');
        for (var i = 0; i < toHide.length; i++) { toHide[i].style.display = "none"; }
        // Show this detail.
        document.getElementById("detail" + id).style.display = "table-row";
    }
</script>

<div class="content">
    <table id="content" class="content">
        <tr>
            <td><span class=logo>@PageData["SiteName"]</span></td>
        </tr>
        <tr>
            <td>@PageData["Tagline"]</td>
        </tr>
        <tr>
            <td>&nbsp;</td>
        </tr>
        <tr>
            <td class="pagetitle">Filters</td>
        </tr>
        <tr class="item">
            <td width="*">&middot; Search &middot;</td>
        </tr>
        <tr class="item">
            <td width="*">&middot; Create a new filter &middot;</td>
        </tr>
        @for (var i = 0; i < Model.Count(); i++)
        {
            <tr class="item header" id="@("header" + Model[i].Id)">
                <td><span onclick="OpenDiv(@Model[i].Id)">@Model[i].Name</span></td>
            </tr>
            <tr class="item detail" id="@("detail" + Model[i].Id)">
                <td>
                    @using (Html.BeginForm("Update/" + Model[i].Id.ToString(), "Filter", FormMethod.Post))
                    {
                        @Html.Hidden("Id", Model[i].Id)
                        <table class="content">
                            <tr><td colspan="2">@Model[i].Name</td></tr>
                            <tr class="form"><td>Name</td><td>@Html.EditorFor(m => m[i].Name, null, "Name")</td></tr>
                            <tr class="form"><td>Category</td><td>@Html.EditorFor(m => m[i].Category.Description, null, "Category")</td></tr>
                            <tr class="form"><td>Radius</td><td>@Html.EditorFor(m => m[i].Radius.Description, null, "Radius")</td></tr>
                            <tr class="form"><td>Active</td><td class="left">@Html.EditorFor(m => m[i].Active, null, "Active")</td></tr>
                            <tr><td></td><td><input type="submit" value="Update filter" /></td></tr>
                        </table>
                    }
                </td>
            </tr>
        }
    </table>
</div>
